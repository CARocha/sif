{%extends "base.html"%}

{%block extra_js%}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
     $(document).ready(function () {
      var latlng = new google.maps.LatLng(12.877, -85.001);
      var options = {
        zoom: 7,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById("map"), options);
      var image = '/files/img/mapicon.png';
      //var infowindow;

            $.getJSON('/ver/todo/', function(data){
                $.each(data, function(i, elemento){
                    var latlng = new google.maps.LatLng(elemento.lat, elemento.lon);
                    var marker = new google.maps.Marker({
                        position: latlng,
                        map: map,
                        name: elemento.nombre,
                        desc: elemento.propiedad,
                        icon: image                        
                    });
                    google.maps.event.addListener(marker, "click", function() {
                        var html = '<b>' + unescape(elemento.nombre) + '</b><br>' + unescape(elemento.propiedad) + '<br>';
                       infowindow = new google.maps.InfoWindow({
                                    content: html});
                  infowindow.open(map, this);
                  });                     
                });
            });
    }); //fin del initialize

</script>

{%endblock%}

{%block contenido%}

    <form action="." method="POST">
      {% csrf_token %}
        <div class="general">
            <div class="titulo">Generales</div>
            <div class="label">{{form.fecha.label}}</div>
            <div class="filtros">{{form.fecha}}<br>{{form.fecha.errors}}</div>
            <div class="clean"></div>

            <div class="label">{{form.tipo_propiedad.label}}</div>
            <div class="filtros">{{form.tipo_propiedad}}<br>{{form.tipo_propiedad.errors}}</div>
            <div class="clean"></div>
            <!-- <div class="label">{{form.area_total.label}}</div>
            <div class="filtros">{{form.area_total}}<br>{{form.area_total.errors}}</div>
            <div class="clean"></div> -->
            <div class="label">{{form.organizado.label}}</div>
            <div class="filtros">{{form.organizado}}<br>{{form.organizado.errors}}</div>
            <div class="clean"></div>
            <div class="label">{{form.gti.label}}</div>
            <div class="filtros">{{form.gti}}<br>{{form.gti.errors}}</div>
            <div class="clean"></div>
            <div class="label">{{form.tipo_bosque_umf.label}}</div>
            <div class="filtros">{{form.tipo_bosque_umf}}<br>{{form.tipo_bosque_umf.errors}}</div>
            <div class="clean"></div>
            <div class="label">{{form.certificacion.label}}</div>
            <div class="filtros">{{form.certificacion}}<br>{{form.certificacion.errors}}</div>
            <div class="clean"></div>

            <button class="consultar">consultar</button>
	  </div>
    </form>
    
    <div id="map" style="width: 500px; height: 300px"></div>
{%endblock%}