{%extends "base.html"%}

{%block extra_js%}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
     $(document).ready(function () {
      var latlng = new google.maps.LatLng(12.877, -85.001);
      var options = {
        zoom: 7,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById("map_canvas"), options);

      //var infowindow;

            $.getJSON('/ver/', function(data){
                $.each(data, function(i, elemento){
                    var latlng = new google.maps.LatLng(elemento.lat, elemento.lon);
                    var marker = new google.maps.Marker({
                        position: latlng,
                        map: map,
                        name: elemento.nombre,
                        desc: elemento.propiedad                        
                    });
                    google.maps.event.addListener(marker, "click", function() {
                    	var html = '<b>' + unescape(elemento.nombre) + '</b><br>' + unescape(elemento.propiedad) + '<br>';
                       infowindow = new google.maps.InfoWindow({
            				content: html});
          		infowindow.open(map, this);
        		});                     
                });
            });
    }); //fin del initialize

</script>

{%endblock%}

{%block contenido%}

	{{prueba}}

	<div id="map_canvas" style="width: 500px; height: 300px"></div>
{%endblock%}